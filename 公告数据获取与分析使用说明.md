# ğŸ“¢ å…¬å‘Šæ•°æ®è·å–ä¸åˆ†æåŠŸèƒ½ä½¿ç”¨è¯´æ˜

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

å…¬å‘Šåˆ†æå¸ˆåŠŸèƒ½å·²å…¨é¢ä¼˜åŒ–ï¼Œç°åœ¨å¯ä»¥ï¼š
- âœ… è·å–ä¸Šå¸‚å…¬å¸æœ€è¿‘30å¤©çš„å…¬å‘Šæ•°æ®
- âœ… ä½¿ç”¨ç»Ÿä¸€æ•°æ®è®¿é—®æ¨¡å— (`UnifiedDataAccess`)
- âœ… æ”¯æŒå¤šä¸ªæ•°æ®æºè‡ªåŠ¨é™çº§ï¼ˆå·¨æ½®èµ„è®¯ â†’ æ–°æµªè´¢ç» â†’ ä¸œæ–¹è´¢å¯Œï¼‰
- âœ… é’ˆå¯¹å®é™…å…¬å‘Šå†…å®¹è¿›è¡Œæ·±åº¦AIåˆ†æ
- âœ… ä½¿ç”¨ä»£ç†ä¼˜åŒ–ç½‘ç»œè®¿é—®

---

## ğŸ“Š æ•°æ®è·å–åŠŸèƒ½

### 1. ç»Ÿä¸€æ•°æ®æ¥å£

æ‰€æœ‰å…¬å‘Šæ•°æ®é€šè¿‡ `unified_data_access.py` çš„ `get_announcement_data()` æ–¹æ³•è·å–ï¼š

```python
from unified_data_access import UnifiedDataAccess

unified_data = UnifiedDataAccess()

# è·å–æœ€è¿‘30å¤©çš„å…¬å‘Š
announcement_data = unified_data.get_announcement_data(
    symbol="000001",  # è‚¡ç¥¨ä»£ç 
    days=30           # è·å–æœ€è¿‘30å¤©
)
```

### 2. è¿”å›æ•°æ®ç»“æ„

```python
{
    "symbol": "000001",
    "announcements": [
        {
            "æ—¥æœŸ": "2025-01-15",
            "å…¬å‘Šæ ‡é¢˜": "2024å¹´åº¦ä¸šç»©é¢„å‘Š",
            "å…¬å‘Šç±»å‹": "ä¸šç»©é¢„å‘Š",
            "å…¬å‘Šæ‘˜è¦": "é¢„è®¡2024å¹´å‡€åˆ©æ¶¦åŒæ¯”å¢é•¿..."
        },
        # ... æ›´å¤šå…¬å‘Š
    ],
    "data_success": True,
    "source": "akshare",
    "days": 30,
    "count": 15,
    "date_range": {
        "start": "2024-12-16",
        "end": "2025-01-15"
    }
}
```

### 3. æ•°æ®æºé™çº§ç­–ç•¥

ç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹é¡ºåºå°è¯•è·å–å…¬å‘Šï¼š

1. **å·¨æ½®èµ„è®¯** (`ak.stock_info_sh_name_code`)
   - æœ€æƒå¨çš„æ•°æ®æº
   - åŒ…å«å…¬å‘Šæ‘˜è¦

2. **æ–°æµªè´¢ç»** (`ak.stock_notice_report`)
   - å¤‡ç”¨æ•°æ®æº
   - æ•°æ®è¾ƒå®Œæ•´

3. **ä¸œæ–¹è´¢å¯Œ** (`ak.stock_notice_em`)
   - ç¬¬äºŒå¤‡ç”¨
   - åŒ…å«å…¬å‘Šç±»å‹å’Œæ‘˜è¦

---

## ğŸ¤– AIåˆ†æåŠŸèƒ½

### 1. å…¬å‘Šåˆ†æå¸ˆç‰¹ç‚¹

**æ ¸å¿ƒå®šä½**ï¼šæ·±åº¦è§£æä¸Šå¸‚å…¬å¸å…¬å‘Šï¼Œè¯†åˆ«é‡å¤§äº‹é¡¹ï¼Œè¯„ä¼°å½±å“

**åˆ†æç»´åº¦**ï¼š
1. **å…¬å‘Šæ•´ä½“è¯„ä¼°**
   - å…¬å‘Šæ´»è·ƒåº¦
   - ä¿¡æ¯æŠ«éœ²è´¨é‡
   - ç±»å‹åˆ†å¸ƒ

2. **é‡å¤§äº‹é¡¹è¯†åˆ«** â­
   - äº‹é¡¹æ€§è´¨ï¼ˆåˆ©å¥½/åˆ©ç©º/ä¸­æ€§ï¼‰
   - å½±å“ç¨‹åº¦ï¼ˆé‡å¤§/ä¸€èˆ¬/è½»å¾®ï¼‰
   - æ—¶æ•ˆæ€§åˆ†æï¼ˆçŸ­æœŸ/ä¸­æœŸ/é•¿æœŸï¼‰

3. **é£é™©ä¸æœºä¼š**
   - ä¸šç»©é£é™©ã€è‚¡æƒé£é™©
   - åˆè§„é£é™©ã€ç»è¥é£é™©
   - æŠ•èµ„æœºä¼šè¯†åˆ«

4. **å¸‚åœºååº”é¢„åˆ¤**
   - å¯èƒ½çš„å¸‚åœºååº”
   - æ˜¯å¦å·²è¢«æ¶ˆåŒ–
   - é¢„æœŸå·®åˆ†æ

5. **æŠ•èµ„å»ºè®®**
   - æ“ä½œå»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å‡ä»“/å›é¿ï¼‰
   - å…³é”®è·Ÿè¸ªäº‹é¡¹
   - é£é™©æç¤º

### 2. åˆ†æç¤ºä¾‹

å½“å…¬å‘Šæ•°æ®è·å–æˆåŠŸæ—¶ï¼ŒAIä¼šæ”¶åˆ°è¯¦ç»†çš„å…¬å‘Šåˆ—è¡¨ï¼š

```
ã€è¯¦ç»†å…¬å‘Šåˆ—è¡¨ã€‘
1. [2025-01-15] 2024å¹´åº¦ä¸šç»©é¢„å‘Š (ç±»å‹: ä¸šç»©é¢„å‘Š)
   æ‘˜è¦: é¢„è®¡2024å¹´å‡€åˆ©æ¶¦åŒæ¯”å¢é•¿15%-20%...

2. [2025-01-10] å…³äºä½¿ç”¨é—²ç½®å‹Ÿé›†èµ„é‡‘è¿›è¡Œç°é‡‘ç®¡ç†çš„å…¬å‘Š (ç±»å‹: èµ„é‡‘ç®¡ç†)
   æ‘˜è¦: æ‹Ÿä½¿ç”¨ä¸è¶…è¿‡5äº¿å…ƒé—²ç½®å‹Ÿé›†èµ„é‡‘è´­ä¹°ç†è´¢äº§å“...

3. [2025-01-05] å…³äºå…¬å¸è‘£äº‹è¾èŒçš„å…¬å‘Š (ç±»å‹: äººäº‹å˜åŠ¨)
   ...
```

AIä¼šé’ˆå¯¹æ¯æ¡å…¬å‘Šè¿›è¡Œä¸“ä¸šåˆ†æã€‚

---

## ğŸ§ª æµ‹è¯•è„šæœ¬ä½¿ç”¨

### 1. å•è‚¡ç¥¨æµ‹è¯•

```bash
# æµ‹è¯•å¹³å®‰é“¶è¡Œï¼ˆé»˜è®¤ï¼‰
python test_announcement_data.py

# æµ‹è¯•æŒ‡å®šè‚¡ç¥¨
python test_announcement_data.py --symbol 600519

# æŒ‡å®šæ—¶é—´èŒƒå›´
python test_announcement_data.py --symbol 600519 --days 60
```

### 2. æ‰¹é‡æµ‹è¯•

```bash
# æµ‹è¯•å¤šåªè‚¡ç¥¨
python test_announcement_data.py --batch
```

æµ‹è¯•è„šæœ¬ä¼šï¼š
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„æ•°æ®è·å–è¿‡ç¨‹
- âœ… åˆ—å‡ºæ‰€æœ‰å…¬å‘Šè¯¦æƒ…
- âœ… ç»Ÿè®¡å…¬å‘Šç±»å‹åˆ†å¸ƒ
- âœ… ä¿å­˜æ•°æ®åˆ°JSONæ–‡ä»¶
- âœ… ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

### 3. è¾“å‡ºç¤ºä¾‹

```
================================================================================
ğŸ“¢ æµ‹è¯•å…¬å‘Šæ•°æ®è·å–
================================================================================
è‚¡ç¥¨ä»£ç : 000001
æ—¶é—´èŒƒå›´: æœ€è¿‘ 30 å¤©
--------------------------------------------------------------------------------

å¼€å§‹è·å–å…¬å‘Šæ•°æ®...

ğŸ“¢ [UnifiedDataAccess] æ­£åœ¨è·å– 000001 æœ€è¿‘30å¤©çš„å…¬å‘Šæ•°æ®...
   [æ–¹æ³•1] å°è¯•ä»å·¨æ½®èµ„è®¯è·å–å…¬å‘Š...
   [æ–¹æ³•1] âœ… æˆåŠŸè·å– 15 æ¡å…¬å‘Š
   âœ… æœ€ç»ˆæˆåŠŸè·å– 15 æ¡å…¬å‘Š (æ—¶é—´èŒƒå›´: 2024-12-16 ~ 2025-01-15)

================================================================================
ğŸ“‹ è·å–ç»“æœæ±‡æ€»
================================================================================
âœ… æˆåŠŸè·å–å…¬å‘Šæ•°æ®!
   æ•°æ®æº: akshare
   å…¬å‘Šæ•°é‡: 15 æ¡
   æ—¶é—´èŒƒå›´: 2024-12-16 ~ 2025-01-15

================================================================================
ğŸ“„ å…¬å‘Šåˆ—è¡¨ (å…± 15 æ¡)
================================================================================

ã€å…¬å‘Š 1ã€‘
  æ—¥æœŸ: 2025-01-15
  æ ‡é¢˜: 2024å¹´åº¦ä¸šç»©é¢„å‘Š
  ç±»å‹: ä¸šç»©é¢„å‘Š
  æ‘˜è¦: é¢„è®¡2024å¹´å‡€åˆ©æ¶¦åŒæ¯”å¢é•¿15%-20%...
--------------------------------------------------------------------------------

ã€å…¬å‘Š 2ã€‘
  æ—¥æœŸ: 2025-01-10
  æ ‡é¢˜: å…³äºä½¿ç”¨é—²ç½®å‹Ÿé›†èµ„é‡‘è¿›è¡Œç°é‡‘ç®¡ç†çš„å…¬å‘Š
  ç±»å‹: èµ„é‡‘ç®¡ç†
--------------------------------------------------------------------------------

...

ğŸ’¾ æ•°æ®å·²ä¿å­˜åˆ°: announcement_data_000001.json

================================================================================
ğŸ“Š å…¬å‘Šç±»å‹ç»Ÿè®¡
================================================================================
  ä¸šç»©é¢„å‘Š: 3 æ¡
  èµ„é‡‘ç®¡ç†: 2 æ¡
  äººäº‹å˜åŠ¨: 2 æ¡
  ...

================================================================================
æµ‹è¯•å®Œæˆ
================================================================================
```

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### 1. æ—¶é—´èŒƒå›´è¿‡æ»¤

```python
# è®¡ç®—æ—¶é—´èŒƒå›´
end_date = datetime.now()
start_date = end_date - timedelta(days=days)

# åªä¿ç•™æ—¶é—´èŒƒå›´å†…çš„å…¬å‘Š
if pub_date >= start_date:
    announcements.append(announcement)
```

### 2. ä»£ç†ä¼˜åŒ–

æ‰€æœ‰æ•°æ®è·å–éƒ½ä½¿ç”¨ä»£ç†ä¼˜åŒ–ï¼š

```python
with network_optimizer.apply():
    df = ak.stock_notice_em(symbol=symbol)
```

### 3. å¼‚å¸¸å¤„ç†

- å•ä¸ªæ•°æ®æºå¤±è´¥ä¸å½±å“æ•´ä½“
- è‡ªåŠ¨é™çº§åˆ°å¤‡ç”¨æ•°æ®æº
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä»…æ”¯æŒAè‚¡**
   - æ¸¯è‚¡å’Œç¾è‚¡ä¸æ”¯æŒå…¬å‘Šæ•°æ®è·å–
   - ä¼šè¿”å›å‹å¥½çš„æç¤ºä¿¡æ¯

2. **æ—¶é—´èŒƒå›´**
   - é»˜è®¤è·å–æœ€è¿‘30å¤©
   - å¯è°ƒæ•´ä¸º7å¤©ã€60å¤©ç­‰
   - å¤ªé•¿çš„æ—¶é—´èŒƒå›´å¯èƒ½å½±å“æ€§èƒ½

3. **æ•°æ®å®Œæ•´æ€§**
   - ä¸åŒæ•°æ®æºçš„å…¬å‘Šå­—æ®µå¯èƒ½ç•¥æœ‰å·®å¼‚
   - ç³»ç»Ÿä¼šè‡ªåŠ¨é€‚é…å­—æ®µåç§°
   - å…¬å‘Šæ‘˜è¦ä¸æ˜¯æ‰€æœ‰æ•°æ®æºéƒ½æœ‰

4. **ç½‘ç»œä¾èµ–**
   - éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
   - å»ºè®®å¯ç”¨ä»£ç†ä¼˜åŒ–
   - å¤šä¸ªæ•°æ®æºæä¾›å†—ä½™ä¿éšœ

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. åœ¨è‚¡ç¥¨åˆ†æä¸­ä½¿ç”¨

```python
# åœ¨app.pyä¸­å·²ç»é›†æˆ
enable_announcement = st.session_state.get('enable_announcement', False)

if enable_announcement and unified_fetcher._is_chinese_stock(symbol):
    announcement_data = unified_fetcher.get_announcement_data(symbol, days=30)
    
    # ä¼ é€’ç»™AIåˆ†æå¸ˆ
    agents_results = agents.run_multi_agent_analysis(
        ...,
        announcement_data=announcement_data,
        ...
    )
```

### 2. ç‹¬ç«‹ä½¿ç”¨

```python
from unified_data_access import UnifiedDataAccess

# åˆ›å»ºå®ä¾‹
unified_data = UnifiedDataAccess()

# è·å–å…¬å‘Š
ann_data = unified_data.get_announcement_data("600519", days=30)

# æ£€æŸ¥ç»“æœ
if ann_data['data_success']:
    print(f"è·å–åˆ° {ann_data['count']} æ¡å…¬å‘Š")
    for ann in ann_data['announcements']:
        print(f"{ann['æ—¥æœŸ']}: {ann['å…¬å‘Šæ ‡é¢˜']}")
else:
    print(f"è·å–å¤±è´¥: {ann_data['error']}")
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: è¿è¡Œæµ‹è¯•

```bash
python test_announcement_data.py --symbol 000001
```

### æ­¥éª¤2: æŸ¥çœ‹ç»“æœ

æŸ¥çœ‹ç”Ÿæˆçš„ `announcement_data_000001.json` æ–‡ä»¶

### æ­¥éª¤3: åœ¨åˆ†æä¸­å¯ç”¨

åœ¨Streamlitç•Œé¢ä¸­ï¼š
1. å‹¾é€‰ "ğŸ“¢ å…¬å‘Šåˆ†æå¸ˆ"
2. è¾“å…¥è‚¡ç¥¨ä»£ç 
3. ç‚¹å‡»"å¼€å§‹åˆ†æ"

### æ­¥éª¤4: æŸ¥çœ‹AIåˆ†æ

åœ¨"å…¬å‘Šåˆ†æå¸ˆ"æ ‡ç­¾é¡µæŸ¥çœ‹è¯¦ç»†åˆ†ææŠ¥å‘Š

---

## ğŸ’¡ åŠŸèƒ½äº®ç‚¹

âœ… **ç»Ÿä¸€æ¥å£** - æ‰€æœ‰æ•°æ®é€šè¿‡unified_data_accessè·å–
âœ… **å¤šæºå†—ä½™** - 3ä¸ªæ•°æ®æºè‡ªåŠ¨é™çº§
âœ… **æ—¶é—´ç²¾å‡†** - ä¸¥æ ¼é™å®šæœ€è¿‘Nå¤©
âœ… **å†…å®¹è¯¦ç»†** - åŒ…å«æ ‡é¢˜ã€ç±»å‹ã€æ‘˜è¦
âœ… **AIæ·±åº¦åˆ†æ** - é’ˆå¯¹å®é™…å…¬å‘Šå†…å®¹åˆ†æ
âœ… **ä»£ç†ä¼˜åŒ–** - æ‰€æœ‰è¯·æ±‚éƒ½ä½¿ç”¨ä»£ç†
âœ… **å®Œæ•´æµ‹è¯•** - ç‹¬ç«‹æµ‹è¯•è„šæœ¬éªŒè¯

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
2. ä»£ç†è®¾ç½®æ˜¯å¦æ­£ç¡®
3. akshareç‰ˆæœ¬æ˜¯å¦æœ€æ–°
4. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—å®šä½é—®é¢˜

---

**ç‰ˆæœ¬**: v2.0  
**æ›´æ–°æ—¥æœŸ**: 2025-01-15  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•

